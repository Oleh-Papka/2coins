<!doctype html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{% block title %}{% endblock %}</title>

    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

    {% load static %}
    <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'reset.css' %}">
    <link rel="stylesheet" href="{% static 'base.css' %}">

    {% block custom_static %}{% endblock %}
</head>
<body>
<div class="w-100 h-100 d-flex flex-row" id="content-wrapper">
    {% if messages %}
        <div class="toast-container position-fixed top-0 start-50 translate-middle-x p-3">
            {% for message in messages %}
                <div class="toast {% if message.tags %}bg-{{ message.tags }}-subtle{% endif %}" role="alert"
                     aria-live="assertive" aria-atomic="true">
                    <div class="toast-header {% if message.tags %}text-bg-{{ message.tags }}{% endif %}">
                        <strong class="me-auto">
                            {% if message.tags == 'success' %}
                                Done!
                            {% elif message.tags == 'danger' %}
                                Shit happened!
                            {% elif message.tags == 'warning' %}
                                Warning!
                            {% else %}
                                Info
                            {% endif %}
                        </strong>
                        <button type="button" class="btn-close" data-bs-dismiss="toast"
                                aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        {{ message }}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    {% block sidebar %}
    {% endblock %}

    <div class="d-flex flex-column w-100">
        {% block body %}
            <div class="bg-body-tertiary border-bottom border-2 d-flex justify-content-between align-items-center px-5"
                 id="page-title">
                <h5 class="m-0">{% if object.name %}{{ object.name }}{% else %}{{ instance_name }}{% endif %}</h5>
                {% block page-controls %}{% endblock %}
            </div>

            <div class="w-100 overflow-y-scroll p-4" id="main-content">
                {% block content %}

                {% endblock %}
            </div>
        {% endblock %}
    </div>
</div>

{% block custom_scripts %}
{% endblock %}

<script src="{% static 'bootstrap/js/bootstrap.js' %}"></script>
<script>
    function go_dark() {
        document.documentElement.setAttribute('data-bs-theme', 'dark');
        document.getElementById('btn-light-theme').checked = false;
    }

    function go_light() {
        document.documentElement.setAttribute('data-bs-theme', 'light');
        document.getElementById('btn-dark-theme').checked = false;
    }

    const toastElList = [].slice.call(document.querySelectorAll('.toast'));
    const toastList = toastElList.map(function (toastEl) {
        // Creates an array of toasts (it only initializes them)
        const toast = new bootstrap.Toast(toastEl); // No need for options; use the default options
        toast.show();

        setTimeout(function () {
            toast.hide();
        }, 2000); // 2 seconds delay before hiding

        return toast;
    });
</script>

</body>
</html>